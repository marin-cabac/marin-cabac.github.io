<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCII Space Invaders</title>
    <style>
        body {
            font-family: monospace;
            color: lime;
            background-color: black;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            margin: 0;
        }
        #game {
            width: 40ch;
            height: 20em;
            white-space: pre;
            font-size: 20px;
            margin-top: 20px;
        }
        .controls {
            margin-top: 10px;
        }
        button {
            font-size: 18px;
            margin: 0 10px;
            padding: 5px 10px;
        }
    </style>
</head>
<body>
    <div id="game"></div>
    <div class="controls">
        <button onclick="startGame()">Start Game</button>
        <button onclick="pauseGame()">Pause Game</button>
    </div>
    <script>
        const game = document.getElementById("game");
        const width = 40; // game area width
        const height = 20; // game area height

        let spaceshipPos = Math.floor(width / 2) - 2;
        let bullets = [];
        let enemies = [];
        let score = 0;
        let gameInterval = null;
        let isPaused = false;

        // Counter to control enemy speed
        let enemyMoveCounter = 0;
        const enemySpeed = 5; // Increase this value to slow down enemies

        // Update game display
        function render() {
            let output = "";

            // Render enemies
            for (let y = 0; y < height; y++) {
                let line = "";
                for (let x = 0; x < width; x++) {
                    if (y === height - 1 && x === spaceshipPos) {
                        line += "<=!=>"; // spaceship
                        x += 4;
                    } else if (bullets.some(b => b.x === x && b.y === y)) {
                        line += "o"; // bullet
                    } else if (enemies.some(e => e.x === x && e.y === y)) {
                        line += "M"; // enemy
                    } else {
                        line += " "; // empty space
                    }
                }
                output += line + "\n";
            }
            game.textContent = output;
        }

        // Move spaceship smoothly and shoot bullets
        document.addEventListener("keydown", e => {
            if (e.key === "ArrowLeft" && spaceshipPos > 0) {
                spaceshipPos--;
            } else if (e.key === "ArrowRight" && spaceshipPos < width - 6) {
                spaceshipPos++;
            } else if (e.key === " ") {
                bullets.push({ x: spaceshipPos + 2, y: height - 2 });
            }
            render();
        });

        // Update game elements
        function update() {
            if (isPaused) return; // Do not update if the game is paused

            // Move bullets
            bullets = bullets.map(b => ({ x: b.x, y: b.y - 1 })).filter(b => b.y >= 0);

            // Spawn enemies randomly
            if (Math.random() < 0.1) {
                enemies.push({ x: Math.floor(Math.random() * width), y: 0 });
            }

            // Move enemies at a slower rate based on counter
            enemyMoveCounter++;
            if (enemyMoveCounter >= enemySpeed) {
                enemies = enemies.map(e => ({ x: e.x, y: e.y + 1 }));
                enemyMoveCounter = 0; // Reset the counter after moving enemies
            }

            // Check for collisions
            bullets.forEach((bullet, bulletIdx) => {
                enemies.forEach((enemy, enemyIdx) => {
                    if (bullet.x === enemy.x && bullet.y === enemy.y) {
                        bullets.splice(bulletIdx, 1); // remove bullet
                        enemies.splice(enemyIdx, 1); // remove enemy
                        score++;
                    }
                });
            });

            // Remove off-screen enemies
            enemies = enemies.filter(e => e.y < height);

            // Check game over condition
            if (enemies.some(e => e.y === height - 1)) {
                alert("Game Over! Score: " + score);
                enemies = [];
                bullets = [];
                score = 0;
            }

            render();
        }

        // Start the game
        function startGame() {
            if (!gameInterval) {
                gameInterval = setInterval(update, 100);
                isPaused = false;
            }
        }

        // Pause the game
        function pauseGame() {
            isPaused = !isPaused;
        }

        render(); // Initial render
    </script>
</body>
</html>
